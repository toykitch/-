<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πä‡∏ß‡∏ô‡∏Å‡∏≠‡∏•‡πå‡∏ü</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Sarabun', sans-serif;
        }
        .status-playing { background: linear-gradient(135deg, #10b981, #059669); }
        .status-waiting { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .status-finished { background: linear-gradient(135deg, #6b7280, #4b5563); }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen p-4">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">üèåÔ∏è‚Äç‚ôÇÔ∏è ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πä‡∏ß‡∏ô‡∏Å‡∏≠‡∏•‡πå‡∏ü</h1>
                    <p class="text-gray-600">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πä‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold text-green-600" id="currentTime"></div>
                    <div class="text-sm text-gray-500">‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</div>
                </div>
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center">
                    <div class="bg-blue-100 p-3 rounded-full">
                        <span class="text-2xl">üë•</span>
                    </div>
                    <div class="ml-4">
                        <div class="text-2xl font-bold text-blue-600" id="totalGroups">8</div>
                        <div class="text-sm text-gray-600">‡∏Å‡πä‡∏ß‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center">
                    <div class="bg-green-100 p-3 rounded-full">
                        <span class="text-2xl">‚õ≥</span>
                    </div>
                    <div class="ml-4">
                        <div class="text-2xl font-bold text-green-600" id="playingGroups">3</div>
                        <div class="text-sm text-gray-600">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô</div>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center">
                    <div class="bg-yellow-100 p-3 rounded-full">
                        <span class="text-2xl">‚è≥</span>
                    </div>
                    <div class="ml-4">
                        <div class="text-2xl font-bold text-yellow-600" id="waitingGroups">3</div>
                        <div class="text-sm text-gray-600">‡∏£‡∏≠‡πÄ‡∏•‡πà‡∏ô</div>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex items-center">
                    <div class="bg-gray-100 p-3 rounded-full">
                        <span class="text-2xl">‚úÖ</span>
                    </div>
                    <div class="ml-4">
                        <div class="text-2xl font-bold text-gray-600" id="finishedGroups">2</div>
                        <div class="text-sm text-gray-600">‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add New Group Form -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6" id="addGroupForm" style="display: none;">
            <h3 class="text-xl font-bold text-gray-800 mb-4">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡πä‡∏ß‡∏ô‡πÉ‡∏´‡∏°‡πà</h3>
            <form onsubmit="submitNewGroup(event)" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πä‡∏ß‡∏ô</label>
                        <input type="text" id="groupName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡πä‡∏ß‡∏ô VIP" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</label>
                        <select id="playerCount" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                            <option value="1">1 ‡∏Ñ‡∏ô</option>
                            <option value="2">2 ‡∏Ñ‡∏ô</option>
                            <option value="3">3 ‡∏Ñ‡∏ô</option>
                            <option value="4" selected>4 ‡∏Ñ‡∏ô</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</label>
                        <input type="time" id="startTime" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                        <select id="initialStatus" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                            <option value="waiting">‡∏£‡∏≠‡πÄ‡∏•‡πà‡∏ô</option>
                            <option value="playing">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô</option>
                            <option value="finished">‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à</option>
                        </select>
                    </div>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡πä‡∏ß‡∏ô
                    </button>
                    <button type="button" onclick="toggleAddForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                </div>
            </form>
        </div>

        <!-- Edit Group Form -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6" id="editGroupForm" style="display: none;">
            <h3 class="text-xl font-bold text-gray-800 mb-4">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πä‡∏ß‡∏ô</h3>
            <form onsubmit="submitEditGroup(event)" class="space-y-4">
                <input type="hidden" id="editGroupId">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡πä‡∏ß‡∏ô</label>
                        <input type="text" id="editGroupName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</label>
                        <select id="editPlayerCount" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="1">1 ‡∏Ñ‡∏ô</option>
                            <option value="2">2 ‡∏Ñ‡∏ô</option>
                            <option value="3">3 ‡∏Ñ‡∏ô</option>
                            <option value="4">4 ‡∏Ñ‡∏ô</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏≠‡∏Å</label>
                        <input type="time" id="editStartTime" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">‡∏´‡∏•‡∏∏‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                        <select id="editCurrentHole" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="0">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</option>
                            <option value="1">‡∏´‡∏•‡∏∏‡∏° 1</option>
                            <option value="2">‡∏´‡∏•‡∏∏‡∏° 2</option>
                            <option value="3">‡∏´‡∏•‡∏∏‡∏° 3</option>
                            <option value="4">‡∏´‡∏•‡∏∏‡∏° 4</option>
                            <option value="5">‡∏´‡∏•‡∏∏‡∏° 5</option>
                            <option value="6">‡∏´‡∏•‡∏∏‡∏° 6</option>
                            <option value="7">‡∏´‡∏•‡∏∏‡∏° 7</option>
                            <option value="8">‡∏´‡∏•‡∏∏‡∏° 8</option>
                            <option value="9">‡∏´‡∏•‡∏∏‡∏° 9</option>
                            <option value="10">‡∏´‡∏•‡∏∏‡∏° 10</option>
                            <option value="11">‡∏´‡∏•‡∏∏‡∏° 11</option>
                            <option value="12">‡∏´‡∏•‡∏∏‡∏° 12</option>
                            <option value="13">‡∏´‡∏•‡∏∏‡∏° 13</option>
                            <option value="14">‡∏´‡∏•‡∏∏‡∏° 14</option>
                            <option value="15">‡∏´‡∏•‡∏∏‡∏° 15</option>
                            <option value="16">‡∏´‡∏•‡∏∏‡∏° 16</option>
                            <option value="17">‡∏´‡∏•‡∏∏‡∏° 17</option>
                            <option value="18">‡∏´‡∏•‡∏∏‡∏° 18</option>
                        </select>
                    </div>
                </div>
                <div class="flex gap-3 pt-4">
                    <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                    </button>
                    <button type="button" onclick="toggleEditForm()" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                        ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                    </button>
                </div>
            </form>
        </div>

        <!-- Groups List -->
        <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
            <div class="bg-gradient-to-r from-green-600 to-blue-600 p-6">
                <h2 class="text-2xl font-bold text-white">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡πä‡∏ß‡∏ô‡∏Å‡∏≠‡∏•‡πå‡∏ü</h2>
            </div>
            
            <div class="p-6">
                <div id="groupsList" class="space-y-4">
                    <!-- Groups will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Control Panel -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mt-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">üéÆ ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h3>
            <div class="flex flex-wrap gap-3">
                <button onclick="toggleAddForm()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡πä‡∏ß‡∏ô‡πÉ‡∏´‡∏°‡πà
                </button>
                <button onclick="refreshStatus()" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                </button>
                <button onclick="exportReport()" class="bg-purple-500 hover:bg-purple-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    üìä ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                </button>
                <button onclick="clearAllData()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
            </div>
        </div>
    </div>

    <script>
        let groups = [
            { id: 1, name: "‡∏Å‡πä‡∏ß‡∏ô A", players: 4, startTime: "07:30", status: "finished", hole: 18 },
            { id: 2, name: "‡∏Å‡πä‡∏ß‡∏ô B", players: 4, startTime: "07:45", status: "finished", hole: 18 },
            { id: 3, name: "‡∏Å‡πä‡∏ß‡∏ô C", players: 3, startTime: "08:00", status: "playing", hole: 12 },
            { id: 4, name: "‡∏Å‡πä‡∏ß‡∏ô D", players: 4, startTime: "08:15", status: "playing", hole: 8 },
            { id: 5, name: "‡∏Å‡πä‡∏ß‡∏ô E", players: 4, startTime: "08:30", status: "playing", hole: 4 },
            { id: 6, name: "‡∏Å‡πä‡∏ß‡∏ô F", players: 3, startTime: "08:45", status: "waiting", hole: 0 },
            { id: 7, name: "‡∏Å‡πä‡∏ß‡∏ô G", players: 4, startTime: "09:00", status: "waiting", hole: 0 },
            { id: 8, name: "‡∏Å‡πä‡∏ß‡∏ô H", players: 2, startTime: "09:15", status: "waiting", hole: 0 }
        ];

        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('th-TH', { 
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        function getStatusInfo(status) {
            const statusMap = {
                'playing': { 
                    text: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô', 
                    class: 'status-playing text-white',
                    icon: '‚õ≥',
                    dot: 'bg-green-400'
                },
                'waiting': { 
                    text: '‡∏£‡∏≠‡πÄ‡∏•‡πà‡∏ô', 
                    class: 'status-waiting text-white',
                    icon: '‚è≥',
                    dot: 'bg-yellow-400'
                },
                'finished': { 
                    text: '‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à', 
                    class: 'status-finished text-white',
                    icon: '‚úÖ',
                    dot: 'bg-gray-400'
                }
            };
            return statusMap[status];
        }

        function calculatePlayTime(startTime, status) {
            if (status === 'waiting') return '-';
            
            const now = new Date();
            const [hours, minutes] = startTime.split(':');
            const start = new Date();
            start.setHours(parseInt(hours), parseInt(minutes), 0);
            
            const diffMs = now - start;
            const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
            const diffMinutes = Math.floor((diffMs % (1000 * 60 * 60)) / (1000 * 60));
            
            if (diffHours > 0) {
                return `${diffHours} ‡∏ä‡∏°. ${diffMinutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;
            }
            return `${diffMinutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;
        }

        function renderGroups() {
            const groupsList = document.getElementById('groupsList');
            groupsList.innerHTML = '';

            groups.forEach(group => {
                const statusInfo = getStatusInfo(group.status);
                const playTime = calculatePlayTime(group.startTime, group.status);
                
                const groupCard = document.createElement('div');
                groupCard.className = 'bg-gray-50 rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-shadow';
                
                groupCard.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="text-3xl font-bold text-gray-700">${group.id}</div>
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">${group.name}</h3>
                                <p class="text-gray-600">üë• ${group.players} ‡∏Ñ‡∏ô | üïê ‡∏≠‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤ ${group.startTime} ‡∏ô.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600">${group.hole}/18</div>
                                <div class="text-sm text-gray-500">‡∏´‡∏•‡∏∏‡∏°</div>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-lg font-semibold text-gray-700">${playTime}</div>
                                <div class="text-sm text-gray-500">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πà‡∏ô</div>
                            </div>
                            
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 rounded-full ${statusInfo.dot} pulse-dot"></div>
                                <span class="px-4 py-2 rounded-full ${statusInfo.class} font-medium">
                                    ${statusInfo.icon} ${statusInfo.text}
                                </span>
                            </div>
                            
                            <div class="flex space-x-2">
                                <button onclick="editGroup(${group.id})" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                                    ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button onclick="updateGroupStatus(${group.id})" class="bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                                    üîÑ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
                                </button>
                                <button onclick="removeGroup(${group.id})" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                                    üóëÔ∏è ‡∏•‡∏ö
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                groupsList.appendChild(groupCard);
            });
        }

        function updateSummary() {
            const playing = groups.filter(g => g.status === 'playing').length;
            const waiting = groups.filter(g => g.status === 'waiting').length;
            const finished = groups.filter(g => g.status === 'finished').length;
            
            document.getElementById('totalGroups').textContent = groups.length;
            document.getElementById('playingGroups').textContent = playing;
            document.getElementById('waitingGroups').textContent = waiting;
            document.getElementById('finishedGroups').textContent = finished;
        }

        function toggleAddForm() {
            const form = document.getElementById('addGroupForm');
            const isVisible = form.style.display !== 'none';
            
            if (isVisible) {
                form.style.display = 'none';
                document.getElementById('groupName').value = '';
                document.getElementById('playerCount').value = '4';
                document.getElementById('startTime').value = '';
                document.getElementById('initialStatus').value = 'waiting';
            } else {
                form.style.display = 'block';
                document.getElementById('editGroupForm').style.display = 'none';
                // Set default time to current time
                const now = new Date();
                const timeString = now.toTimeString().slice(0, 5);
                document.getElementById('startTime').value = timeString;
            }
        }

        function toggleEditForm() {
            const form = document.getElementById('editGroupForm');
            form.style.display = 'none';
        }

        function submitNewGroup(event) {
            event.preventDefault();
            
            const name = document.getElementById('groupName').value;
            const players = parseInt(document.getElementById('playerCount').value);
            const startTime = document.getElementById('startTime').value;
            const status = document.getElementById('initialStatus').value;
            
            const newId = groups.length > 0 ? Math.max(...groups.map(g => g.id)) + 1 : 1;
            const newGroup = {
                id: newId,
                name: name,
                players: players,
                startTime: startTime,
                status: status,
                hole: status === 'finished' ? 18 : (status === 'playing' ? 1 : 0)
            };
            
            groups.push(newGroup);
            renderGroups();
            updateSummary();
            toggleAddForm();
            
            alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡πä‡∏ß‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! üéâ');
        }

        function editGroup(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group) return;
            
            document.getElementById('editGroupId').value = group.id;
            document.getElementById('editGroupName').value = group.name;
            document.getElementById('editPlayerCount').value = group.players;
            document.getElementById('editStartTime').value = group.startTime;
            document.getElementById('editCurrentHole').value = group.hole;
            
            document.getElementById('editGroupForm').style.display = 'block';
            document.getElementById('addGroupForm').style.display = 'none';
        }

        function submitEditGroup(event) {
            event.preventDefault();
            
            const groupId = parseInt(document.getElementById('editGroupId').value);
            const group = groups.find(g => g.id === groupId);
            if (!group) return;
            
            group.name = document.getElementById('editGroupName').value;
            group.players = parseInt(document.getElementById('editPlayerCount').value);
            group.startTime = document.getElementById('editStartTime').value;
            group.hole = parseInt(document.getElementById('editCurrentHole').value);
            
            // Update status based on hole
            if (group.hole === 0) {
                group.status = 'waiting';
            } else if (group.hole === 18) {
                group.status = 'finished';
            } else {
                group.status = 'playing';
            }
            
            renderGroups();
            updateSummary();
            toggleEditForm();
            
            alert('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ‚úÖ');
        }

        function updateGroupStatus(groupId) {
            const group = groups.find(g => g.id === groupId);
            if (!group) return;
            
            const statusOptions = ['waiting', 'playing', 'finished'];
            const currentIndex = statusOptions.indexOf(group.status);
            const nextIndex = (currentIndex + 1) % statusOptions.length;
            
            group.status = statusOptions[nextIndex];
            
            if (group.status === 'playing' && group.hole === 0) {
                group.hole = 1;
            } else if (group.status === 'finished') {
                group.hole = 18;
            } else if (group.status === 'waiting') {
                group.hole = 0;
            }
            
            renderGroups();
            updateSummary();
        }

        function removeGroup(groupId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡πä‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                groups = groups.filter(g => g.id !== groupId);
                renderGroups();
                updateSummary();
                alert('‡∏•‡∏ö‡∏Å‡πä‡∏ß‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! üóëÔ∏è');
            }
        }

        function refreshStatus() {
            // Simulate random progress for playing groups
            groups.forEach(group => {
                if (group.status === 'playing' && group.hole < 18) {
                    const chance = Math.random();
                    if (chance > 0.7) {
                        group.hole = Math.min(group.hole + 1, 18);
                        if (group.hole === 18) {
                            group.status = 'finished';
                        }
                    }
                }
            });
            
            renderGroups();
            updateSummary();
            alert('‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! üîÑ');
        }

        function clearAllData() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ!')) {
                groups = [];
                renderGroups();
                updateSummary();
                alert('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! üóëÔ∏è');
            }
        }

        function exportReport() {
            const reportData = {
                timestamp: new Date().toLocaleString('th-TH'),
                summary: {
                    total: groups.length,
                    playing: groups.filter(g => g.status === 'playing').length,
                    waiting: groups.filter(g => g.status === 'waiting').length,
                    finished: groups.filter(g => g.status === 'finished').length
                },
                groups: groups
            };
            
            const dataStr = JSON.stringify(reportData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `golf-report-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            alert('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! üìä');
        }

        // Initialize
        setInterval(updateCurrentTime, 1000);
        setInterval(renderGroups, 30000); // Auto refresh every 30 seconds
        
        updateCurrentTime();
        renderGroups();
        updateSummary();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'986989a533a5d00c',t:'MTc1OTEyODUzNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
